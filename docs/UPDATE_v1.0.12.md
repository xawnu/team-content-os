# v1.0.12 更新说明

## 🎯 新功能：文案质量评分机制

### 主要改进

1. **自动质量评估**
   - 生成文案后自动计算质量评分
   - 总分 0-100，等级评定（优秀/良好/及格/待改进）
   - 无需人工判断，系统自动评估

2. **三个评估维度**
   
   **📐 结构完整度（0-100分）**
   - 开场口播是否完整（≥3句）
   - 分镜段数是否充足（≥8段）
   - 内容要点是否清晰（≥5条）
   - 分镜段落长度是否均衡
   - 差异化点是否充分（≥3条）

   **🎬 可拍摄性（0-100分）**
   - 镜头动作覆盖率（近景、特写、推镜等）
   - 场景描述充分度（室内、桌面、背景等）
   - 镜头动作密度（平均每段≥2个动作）
   - 画面描述长度（≥30字/段）
   - 口播长度（≥50字/段）

   **💎 去空话指数（0-100分）**
   - 空话词汇占比（"非常"、"很"、"可能"等）
   - 数字/案例密度（具体数据、实例）
   - 动词使用率（动作性强的词汇）
   - 平均句子长度（避免过长或过短）

3. **可视化评分卡片**
   - 总分大卡片（带等级和emoji）
   - 三个维度分卡片（带进度条）
   - 详细问题诊断（最多显示3条/维度）
   - 颜色编码（绿色优秀、蓝色良好、黄色及格、红色待改进）

4. **快速筛选高质量文案**
   - 生成多个版本后对比评分
   - 优先选择高分文案
   - 根据改进建议优化低分文案

### 评分标准

**等级划分：**
- 🌟 优秀（80-100分）：可直接使用
- 👍 良好（60-79分）：稍作调整即可
- ✓ 及格（40-59分）：需要优化
- ⚠️ 待改进（<40分）：建议重新生成

**维度权重：**
- 结构完整度：33.3%
- 可拍摄性：33.3%
- 去空话指数：33.3%

### 使用场景

**场景 1：快速筛选最佳版本**
```
1. 生成 3-5 个版本
2. 查看每个版本的评分
3. 选择总分最高的版本
4. 查看改进建议，进一步优化
```

**场景 2：诊断文案问题**
```
1. 生成文案后查看评分
2. 如果某个维度分数低
3. 查看该维度的详细问题
4. 针对性修改参数重新生成
```

**场景 3：对比不同配置效果**
```
配置 A（专业理性）→ 生成 → 评分 75
配置 B（朋友口语）→ 生成 → 评分 82
选择配置 B，因为评分更高
```

### 评分示例

**优秀文案（85分）：**
```
┌─────────────────────────────────────┐
│ 文案质量评分                         │
│ 85 / 100                    🌟 优秀 │
├─────────────────────────────────────┤
│ 📐 结构完整度: 88                   │
│ ✓ 开场口播完整（5句）                │
│ ✓ 分镜段数充足（10段）               │
│ ✓ 内容要点清晰（8条）                │
├─────────────────────────────────────┤
│ 🎬 可拍摄性: 82                     │
│ ✓ 镜头动作覆盖率高（90%）            │
│ ✓ 场景描述充分（70%）                │
│ ✓ 镜头动作密度高（平均2.3个/段）     │
├─────────────────────────────────────┤
│ 💎 去空话指数: 85                   │
│ ✓ 空话词汇占比低（3.2%）             │
│ ✓ 数字/案例密度高（12个）            │
│ ✓ 动词使用率高（18.5%）              │
└─────────────────────────────────────┘
```

**待改进文案（35分）：**
```
┌─────────────────────────────────────┐
│ 文案质量评分                         │
│ 35 / 100                ⚠️ 待改进   │
├─────────────────────────────────────┤
│ 📐 结构完整度: 40                   │
│ ✗ 开场口播不足3句                    │
│ △ 分镜段数偏少（5段，建议≥8段）      │
│ ✗ 内容要点不足（2条）                │
├─────────────────────────────────────┤
│ 🎬 可拍摄性: 25                     │
│ ✗ 镜头动作覆盖率低（30%）            │
│ ✗ 场景描述不足（20%）                │
│ ✗ 第3段画面描述过短（15字）          │
├─────────────────────────────────────┤
│ 💎 去空话指数: 40                   │
│ ✗ 空话词汇占比高（12.5%）            │
│ ✗ 缺少具体数字和案例                 │
│ △ 动词使用率偏低（8.2%）             │
└─────────────────────────────────────┘
```

### 技术实现

**评分算法：**
```typescript
// 结构完整度评分
- 开场完整性：15分
- 分镜段数：25分
- 内容要点：20分
- 段落平衡性：20分
- 差异化点：20分

// 可拍摄性评分
- 镜头动作覆盖率：40分
- 场景描述覆盖率：30分
- 镜头动作密度：30分

// 去空话指数评分
- 从100分开始扣分
- 空话词汇：每个扣2分
- 缺少数字/案例：扣10-20分
- 动词使用率低：扣5-15分
- 句子过长/过短：扣5-10分
```

**自动触发：**
- 每次生成文案后自动计算
- 点击"再来一版"后重新计算
- 无需手动操作

### UI 变化

**生成结果页面：**
```
之前：
┌─────────────────────────────────────┐
│ 生成结果（AI） [🔄 再来一版]         │
│ 📋 当前配置                          │
│ 主题 / 标题 / 封面文案...            │
└─────────────────────────────────────┘

现在：
┌─────────────────────────────────────┐
│ 生成结果（AI） [🔄 再来一版]         │
│ 📋 当前配置                          │
│ ┌─────────────────────────────────┐ │
│ │ 文案质量评分: 85 / 100  🌟 优秀 │ │
│ │ 📐 结构完整度: 88               │ │
│ │ 🎬 可拍摄性: 82                 │ │
│ │ 💎 去空话指数: 85               │ │
│ └─────────────────────────────────┘ │
│ 主题 / 标题 / 封面文案...            │
└─────────────────────────────────────┘
```

### 用户体验提升

**之前：**
- 生成后只能人工判断质量
- 不清楚哪个版本更好
- 不知道如何改进

**现在：**
- 自动评分，一目了然
- 快速对比多个版本
- 详细改进建议

### 注意事项

1. **评分仅供参考**
   - 算法基于规则，不能完全替代人工判断
   - 高分不代表一定适合你的频道
   - 低分也可能有独特价值

2. **评分不是唯一标准**
   - 还需考虑品牌调性
   - 目标受众偏好
   - 实际拍摄条件

3. **改进建议的使用**
   - 优先解决"✗"标记的问题
   - "△"标记的问题可选择性优化
   - "✓"标记的部分保持即可

### 下一步优化

- [ ] 支持自定义评分权重
- [ ] 增加更多评估维度（创意性、情感共鸣等）
- [ ] 支持历史评分趋势分析
- [ ] 支持评分排行榜（团队内对比）

---

**部署说明：**

1. 拉取最新代码：`git pull origin master`
2. 重新构建：`npm run build`
3. 重启服务：`pm2 restart youtube.9180.net`

**兼容性：**
- 向后兼容，无破坏性变更
- 旧版本生成的文案不会自动评分
- 新生成的文案会自动评分
