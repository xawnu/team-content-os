# v1.0.21 更新说明

## 🎯 新功能：评分系统增强

### 主要改进

1. **新增 3 个评估维度**
   - 创意性：差异化点、标题新颖性、开场钩子、内容角度
   - 情感共鸣：情感词汇、痛点触达、共鸣场景
   - 节奏感：分镜时长分布、句子长度变化、信息密度

2. **自定义评分权重**
   - 6 个维度独立调整权重
   - 滑块界面，实时调整
   - 权重总和自动验证（必须为 100%）
   - 一键恢复默认配置

3. **增强版评分卡片**
   - 6 个维度并排展示
   - 每个维度显示评分、进度条、详情
   - 颜色编码（优秀/良好/及格/待改进）
   - 显示当前权重配置

4. **评分系统切换**
   - 支持基础版/增强版切换
   - 基础版：3 个维度（结构、可拍摄性、具体性）
   - 增强版：6 个维度（+ 创意性、情感共鸣、节奏感）
   - 灵活选择评估标准

### 评分维度详解

**基础维度（原有）：**

1. **结构完整度（20%）**
   - 开场口播完整性
   - 分镜段数充足性
   - 内容要点清晰度
   - 段落平衡性

2. **可拍摄性（25%）**
   - 画面描述具体性
   - 视觉元素丰富度
   - 镜头语言清晰度

3. **去空话指数（20%）**
   - 具体数字使用
   - 动词具体性
   - 避免泛化表达

**新增维度：**

4. **创意性（15%）**
   - 差异化点数量（≥3个）
   - 标题新颖性（避开常见套路）
   - 开场钩子多样化（疑问/对比/数据）
   - 内容角度独特性（误区/真相/对比等）

5. **情感共鸣（10%）**
   - 情感词汇密度（惊讶/担心/开心等）
   - 用户痛点触达（浪费/困扰/省钱等）
   - 共鸣场景描述（"你是否..."）

6. **节奏感（10%）**
   - 分镜时长分布（快慢结合）
   - 句子长度变化（避免单调）
   - 信息密度控制（避免过载）

### 使用场景

**场景 1：使用默认权重**
```
生成文案 → 自动使用增强版评分
→ 查看 6 个维度评分
→ 了解文案优缺点
```

**场景 2：自定义权重**
```
点击「展开」权重配置
→ 调整各维度权重（如：创意性 30%）
→ 重新生成文案
→ 按新权重评分
```

**场景 3：对比评分系统**
```
勾选「使用增强版评分系统」
→ 查看 6 维度评分
→ 取消勾选
→ 查看 3 维度评分
→ 对比差异
```

**场景 4：针对性优化**
```
生成文案 → 查看评分
→ 发现「创意性」低（60分）
→ 增加差异化点
→ 重新生成
→ 创意性提升到 85分
```

### 权重配置界面

```
┌─────────────────────────────────────┐
│ ⚖️ 评分权重配置    [恢复默认] [展开] │
├─────────────────────────────────────┤
│ 结构完整度                      20% │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                     │
│ 可拍摄性                        25% │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                     │
│ 去空话指数                      20% │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                     │
│ 创意性                          15% │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                     │
│ 情感共鸣                        10% │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                     │
│ 节奏感                          10% │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                     │
│ 总计                           100% │
└─────────────────────────────────────┘
```

### 技术实现

**评分函数：**
```typescript
export function evaluateScriptQualityEnhanced(
  script: DetailedScript,
  weights: ScoreWeights
): EnhancedScriptQualityScore {
  const basic = evaluateScriptQuality(script);
  const creativity = evaluateCreativity(script);
  const emotion = evaluateEmotion(script);
  const rhythm = evaluateRhythm(script);

  const overall = Math.round(
    basic.structure.score * weights.structure +
    basic.shootability.score * weights.shootability +
    basic.concreteness.score * weights.concreteness +
    creativity.score * weights.creativity +
    emotion.score * weights.emotion +
    rhythm.score * weights.rhythm
  );

  return { overall, ...basic, creativity, emotion, rhythm, weights };
}
```

**权重配置：**
```typescript
const DEFAULT_WEIGHTS = {
  structure: 0.20,      // 结构完整度
  shootability: 0.25,   // 可拍摄性
  concreteness: 0.20,   // 去空话指数
  creativity: 0.15,     // 创意性
  emotion: 0.10,        // 情感共鸣
  rhythm: 0.10,         // 节奏感
};
```

### 评分标准

**创意性评分：**
- 差异化点 ≥3个：满分
- 标题避开套路：+分
- 开场钩子多样：+分
- 内容角度独特：+分

**情感共鸣评分：**
- 情感词汇 ≥3个：满分
- 痛点触达 ≥2个：满分
- 共鸣场景描述：+分

**节奏感评分：**
- 分镜时长分布合理：+分
- 句子长度有变化：+分
- 信息密度适中：+分

### 后续优化方向

1. **历史评分趋势**
   - 记录每次生成的评分
   - 显示评分趋势图表
   - 分析评分变化

2. **评分排行榜**
   - 团队内评分对比
   - 最佳文案展示
   - 学习优秀案例

3. **智能优化建议**
   - 根据低分维度给出建议
   - AI 自动优化文案
   - 一键应用优化

4. **自定义评分维度**
   - 用户自定义评分标准
   - 行业特定评分维度
   - 灵活配置评分规则

---

**部署说明：**

1. 拉取最新代码：`git pull origin master`
2. 重新构建：`npm run build`
3. 重启服务：`pm2 restart youtube.9180.net`

**兼容性：**
- 向后兼容，无破坏性变更
- 默认使用增强版评分
- 可切换回基础版评分
- 权重配置保存在客户端
